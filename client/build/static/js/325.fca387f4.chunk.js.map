{"version":3,"file":"static/js/325.fca387f4.chunk.js","mappings":"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","sources":["Routes/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst user = AuthService.getCurrentUser();\r\n\r\nexport default function SignIn() {\r\n  useEffect(() => {\r\n    if (!!user) {\r\n      AuthService.logout();\r\n      window.location.reload();\r\n    }\r\n  }, []);\r\n\r\n  const navigate = useNavigate();\r\n  const [Loading, setLoading] = useState(false);\r\n  const [data, setData] = useState({\r\n    phone: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setData((prev) => {\r\n      return {\r\n        ...prev,\r\n        [name]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    if (data.password && data.phone) {\r\n      setLoading(true);\r\n      AuthService.login(data.phone, data.password).then(\r\n        (res) => {\r\n          if (res.role === \"farmer\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/farmers\");\r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"admin\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/admin\");\r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"customer\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/customers\");\r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          setLoading(false);\r\n        },\r\n        (error) => {\r\n          toast.warn(\"Login failed\", {\r\n            position: \"top-center\",\r\n            autoClose: 5000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n          });\r\n          setData({\r\n            phone: \"\",\r\n            password: \"\",\r\n          });\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } else {\r\n      toast.warn(\"data invalid\", {\r\n        position: \"top-center\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        theme: \"light\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"authContainer\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n      {/* Same as */}\r\n      <ToastContainer />\r\n      {!Loading ? (\r\n        <div className=\"authbox\">\r\n          <img\r\n            className=\"login_image\"\r\n            src=\"./images/slidestall2.webp\"\r\n            alt=\"logo\"\r\n          />\r\n          <form onSubmit={handleLogin} className=\"login_details\">\r\n            {/* <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n              </Avatar> */}\r\n            <img className=\"form-logo\" src=\"./logo.png\" alt=\"form-logo\" />\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Welcome to Wingrowagritech\r\n            </Typography>\r\n            <Typography mt={2} component=\"h1\" variant=\"h5\">\r\n              Login here.\r\n            </Typography>\r\n            <TextField\r\n              inputlabelprops={{\r\n                style: { fontSize: 16, fontFamily: \"monospace\" },\r\n              }}\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"phone\"\r\n              label=\"Mobile Number\"\r\n              name=\"phone\"\r\n              value={data.phone}\r\n              autoComplete=\"phone\"\r\n              autoFocus\r\n              color=\"success\"\r\n              className=\"textfield\"\r\n              onChange={handleChange}\r\n            />\r\n            <TextField\r\n              inputlabelprops={{\r\n                style: { fontSize: 16, fontFamily: \"monospace\" },\r\n              }}\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              value={data.password}\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              color=\"success\"\r\n              className=\"textfield\"\r\n              onChange={handleChange}\r\n            />\r\n            <Link className=\"form-link\" to={\"/Forgot\"} variant=\"body2\">\r\n              Forgot your password?\r\n            </Link>\r\n            <Button\r\n              className=\"form-btn\"\r\n              type=\"submit\"\r\n              color=\"success\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Login\r\n            </Button>\r\n            <Typography className=\"form-link\" mt={2}>\r\n              New to Wingrow? \r\n               <Link to=\"/Register\" variant=\"body2\" className=\"form-link signupWithUs\">\r\n                 Signup with us\r\n              </Link>\r\n            </Typography>\r\n          </form>\r\n        </div>\r\n      ) : (\r\n        <Spinner />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["user","AuthService","SignIn","useEffect","window","location","reload","navigate","useNavigate","useState","Loading","setLoading","phone","password","data","setData","handleChange","e","target","name","value","prev","className","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","src","alt","onSubmit","preventDefault","then","res","role","toast","progress","undefined","setTimeout","error","component","variant","mt","inputlabelprops","style","fontSize","fontFamily","margin","required","fullWidth","id","label","autoComplete","autoFocus","color","onChange","type","to","size","sx","mb"],"sourceRoot":""}