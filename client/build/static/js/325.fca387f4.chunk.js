"use strict";(self.webpackChunkwingrow=self.webpackChunkwingrow||[]).push([[325],{7325:function(e,o,s){s.r(o),s.d(o,{default:function(){return w}});var n=s(4942),r=s(1413),a=s(9439),t=s(2791),i=s(7205),l=s(5017),c=s(4565),u=s(7689),d=s(1087),g=s(6457),m=s(1840),p=s(5985),h=(s(5462),s(184)),f=g.Z.getCurrentUser();function w(){(0,t.useEffect)((function(){f&&(g.Z.logout(),window.location.reload())}),[]);var e=(0,u.s0)(),o=(0,t.useState)(!1),s=(0,a.Z)(o,2),w=s[0],v=s[1],b=(0,t.useState)({phone:"",password:""}),x=(0,a.Z)(b,2),C=x[0],j=x[1],Z=function(e){var o=e.target,s=o.name,a=o.value;j((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,n.Z)({},s,a))}))};return(0,h.jsxs)("div",{className:"authContainer",children:[(0,h.jsx)(p.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,h.jsx)(p.Ix,{}),w?(0,h.jsx)(m.Z,{}):(0,h.jsxs)("div",{className:"authbox",children:[(0,h.jsx)("img",{className:"login_image",src:"./images/slidestall2.webp",alt:"logo"}),(0,h.jsxs)("form",{onSubmit:function(o){o.preventDefault(),C.password&&C.phone?(v(!0),g.Z.login(C.phone,C.password).then((function(o){"farmer"===o.role&&(p.Am.success("Login successful!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){e("/farmers"),window.location.reload()}),1e3)),"admin"===o.role&&(p.Am.success("Login successful!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){e("/admin"),window.location.reload()}),1e3)),"customer"===o.role&&(p.Am.success("Login successful!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){e("/customers"),window.location.reload()}),1e3)),v(!1)}),(function(e){p.Am.warn("Login failed",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),j({phone:"",password:""}),v(!1)}))):p.Am.warn("data invalid",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},className:"login_details",children:[(0,h.jsx)("img",{className:"form-logo",src:"./logo.png",alt:"form-logo"}),(0,h.jsx)(c.Z,{component:"h1",variant:"h5",children:"Welcome to Wingrowagritech"}),(0,h.jsx)(c.Z,{mt:2,component:"h1",variant:"h5",children:"Login here."}),(0,h.jsx)(l.Z,{inputlabelprops:{style:{fontSize:16,fontFamily:"monospace"}},margin:"normal",required:!0,fullWidth:!0,id:"phone",label:"Mobile Number",name:"phone",value:C.phone,autoComplete:"phone",autoFocus:!0,color:"success",className:"textfield",onChange:Z}),(0,h.jsx)(l.Z,{inputlabelprops:{style:{fontSize:16,fontFamily:"monospace"}},margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",value:C.password,type:"password",id:"password",autoComplete:"current-password",color:"success",className:"textfield",onChange:Z}),(0,h.jsx)(d.rU,{className:"form-link",to:"/Forgot",variant:"body2",children:"Forgot your password?"}),(0,h.jsx)(i.Z,{className:"form-btn",type:"submit",color:"success",variant:"contained",size:"large",sx:{mt:3,mb:2},children:"Login"}),(0,h.jsxs)(c.Z,{className:"form-link",mt:2,children:["New to Wingrow?",(0,h.jsx)(d.rU,{to:"/Register",variant:"body2",className:"form-link signupWithUs",children:"Signup with us"})]})]})]})]})}},5462:function(){}}]);
//# sourceMappingURL=325.fca387f4.chunk.js.map